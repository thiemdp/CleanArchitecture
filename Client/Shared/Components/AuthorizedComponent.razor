@namespace BlazorHero.CleanArchitecture.Client.Shared.Components

@if (_permission)
{
    @ChildContent
}
@code{
    [Parameter]
    public string Policy { get; set; }
    [Parameter]
    public RenderFragment ChildContent { get; set; }
    bool _permission = false;
    protected override async Task OnParametersSetAsync()
    {
            if (string.IsNullOrEmpty(Policy))
                _permission = true;
            else
            {
                var _authenticationStateProviderUser = await _stateProvider.GetAuthenticationStateProviderUserAsync();
                _permission = (await _authorizationService.AuthorizeAsync(_authenticationStateProviderUser, Policy)).Succeeded;
            }
    }
}
